[1m[33mCapturing your domain name(B[m
[1m[33mCapturing your FQDN(B[m
[1m[33mDetecting IP Address(B[m
Your domain name is currently [31mtest.vm(B[m
Your FQDN is currently [31mgraylog01.test.vm(B[m
Detected IP Address is [31m192.168.33.22(B[m
Disabling CD Sources and Updating Apt Packages and Installing Pre-Reqs
Reading package lists...
Building dependency tree...
Reading state information...
git is already the newest version.
openjdk-7-jre-headless is already the newest version.
openjdk-7-jre-headless set to manually installed.
The following extra packages will be installed:
  apache2-mpm-worker apache2-utils apache2.2-bin apache2.2-common comerr-dev
  krb5-multidev libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap
  libgcrypt11 libgcrypt11-dev libgnutls-dev libgnutls-openssl27 libgnutls26
  libgnutlsxx27 libgpg-error-dev libgssapi-krb5-2 libgssrpc4 libidn11-dev
  libk5crypto3 libkadm5clnt-mit8 libkadm5srv-mit8 libkdb5-6 libkrb5-3
  libkrb5-dev libkrb5support0 libldap-2.4-2 libldap2-dev libp11-kit-dev
  librtmp-dev libtasn1-3 libtasn1-3-dev pkg-config ssl-cert
Suggested packages:
  www-browser apache2-doc apache2-suexec apache2-suexec-custom doc-base
  krb5-doc libcurl3-dbg rng-tools libgcrypt11-doc gnutls-doc gnutls-bin
  krb5-user openssl-blacklist
The following NEW packages will be installed:
  apache2 apache2-mpm-worker apache2-utils apache2.2-bin apache2.2-common
  comerr-dev krb5-multidev libapr1 libaprutil1 libaprutil1-dbd-sqlite3
  libaprutil1-ldap libcurl4-openssl-dev libgcrypt11-dev libgnutls-dev
  libgnutls-openssl27 libgnutlsxx27 libgpg-error-dev libgssrpc4 libidn11-dev
  libkadm5clnt-mit8 libkadm5srv-mit8 libkdb5-6 libkrb5-dev libldap2-dev
  libp11-kit-dev librtmp-dev libtasn1-3-dev pkg-config ssl-cert
The following packages will be upgraded:
  libgcrypt11 libgnutls26 libgssapi-krb5-2 libk5crypto3 libkrb5-3
  libkrb5support0 libldap-2.4-2 libtasn1-3
8 upgraded, 29 newly installed, 0 to remove and 159 not upgraded.
Need to get 281 kB/7,464 kB of archives.
After this operation, 17.9 MB of additional disk space will be used.
Get:1 http://us.archive.ubuntu.com/ubuntu/ precise-updates/main libgcrypt11 amd64 1.5.0-3ubuntu0.3 [281 kB]
Preconfiguring packages ...
Fetched 281 kB in 9s (29.6 kB/s)
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 55784 files and directories currently installed.)
Preparing to replace libgcrypt11 1.5.0-3 (using .../libgcrypt11_1.5.0-3ubuntu0.3_amd64.deb) ...
Unpacking replacement libgcrypt11 ...
Preparing to replace libtasn1-3 2.10-1ubuntu1 (using .../libtasn1-3_2.10-1ubuntu1.2_amd64.deb) ...
Unpacking replacement libtasn1-3 ...
Preparing to replace libgnutls26 2.12.14-5ubuntu3 (using .../libgnutls26_2.12.14-5ubuntu3.8_amd64.deb) ...
Unpacking replacement libgnutls26 ...
Preparing to replace libk5crypto3 1.10+dfsg~beta1-2 (using .../libk5crypto3_1.10+dfsg~beta1-2ubuntu0.5_amd64.deb) ...
Unpacking replacement libk5crypto3 ...
Preparing to replace libgssapi-krb5-2 1.10+dfsg~beta1-2 (using .../libgssapi-krb5-2_1.10+dfsg~beta1-2ubuntu0.5_amd64.deb) ...
Unpacking replacement libgssapi-krb5-2 ...
Preparing to replace libkrb5-3 1.10+dfsg~beta1-2 (using .../libkrb5-3_1.10+dfsg~beta1-2ubuntu0.5_amd64.deb) ...
Unpacking replacement libkrb5-3 ...
Preparing to replace libkrb5support0 1.10+dfsg~beta1-2 (using .../libkrb5support0_1.10+dfsg~beta1-2ubuntu0.5_amd64.deb) ...
Unpacking replacement libkrb5support0 ...
Selecting previously unselected package libgssrpc4.
Unpacking libgssrpc4 (from .../libgssrpc4_1.10+dfsg~beta1-2ubuntu0.5_amd64.deb) ...
Selecting previously unselected package libkadm5clnt-mit8.
Unpacking libkadm5clnt-mit8 (from .../libkadm5clnt-mit8_1.10+dfsg~beta1-2ubuntu0.5_amd64.deb) ...
Selecting previously unselected package libkdb5-6.
Unpacking libkdb5-6 (from .../libkdb5-6_1.10+dfsg~beta1-2ubuntu0.5_amd64.deb) ...
Selecting previously unselected package libkadm5srv-mit8.
Unpacking libkadm5srv-mit8 (from .../libkadm5srv-mit8_1.10+dfsg~beta1-2ubuntu0.5_amd64.deb) ...
Preparing to replace libldap-2.4-2 2.4.28-1.1ubuntu4 (using .../libldap-2.4-2_2.4.28-1.1ubuntu4.4_amd64.deb) ...
Unpacking replacement libldap-2.4-2 ...
Selecting previously unselected package libgnutls-openssl27.
Unpacking libgnutls-openssl27 (from .../libgnutls-openssl27_2.12.14-5ubuntu3.8_amd64.deb) ...
Selecting previously unselected package libgnutlsxx27.
Unpacking libgnutlsxx27 (from .../libgnutlsxx27_2.12.14-5ubuntu3.8_amd64.deb) ...
Selecting previously unselected package libapr1.
Unpacking libapr1 (from .../libapr1_1.4.6-1_amd64.deb) ...
Selecting previously unselected package libaprutil1.
Unpacking libaprutil1 (from .../libaprutil1_1.3.12+dfsg-3_amd64.deb) ...
Selecting previously unselected package libaprutil1-dbd-sqlite3.
Unpacking libaprutil1-dbd-sqlite3 (from .../libaprutil1-dbd-sqlite3_1.3.12+dfsg-3_amd64.deb) ...
Selecting previously unselected package libaprutil1-ldap.
Unpacking libaprutil1-ldap (from .../libaprutil1-ldap_1.3.12+dfsg-3_amd64.deb) ...
Selecting previously unselected package apache2.2-bin.
Unpacking apache2.2-bin (from .../apache2.2-bin_2.2.22-1ubuntu1.7_amd64.deb) ...
Selecting previously unselected package apache2-utils.
Unpacking apache2-utils (from .../apache2-utils_2.2.22-1ubuntu1.7_amd64.deb) ...
Selecting previously unselected package apache2.2-common.
Unpacking apache2.2-common (from .../apache2.2-common_2.2.22-1ubuntu1.7_amd64.deb) ...
Selecting previously unselected package apache2-mpm-worker.
Unpacking apache2-mpm-worker (from .../apache2-mpm-worker_2.2.22-1ubuntu1.7_amd64.deb) ...
Selecting previously unselected package apache2.
Unpacking apache2 (from .../apache2_2.2.22-1ubuntu1.7_amd64.deb) ...
Selecting previously unselected package comerr-dev.
Unpacking comerr-dev (from .../comerr-dev_2.1-1.42-1ubuntu2_amd64.deb) ...
Selecting previously unselected package krb5-multidev.
Unpacking krb5-multidev (from .../krb5-multidev_1.10+dfsg~beta1-2ubuntu0.5_amd64.deb) ...
Selecting previously unselected package pkg-config.
Unpacking pkg-config (from .../pkg-config_0.26-1ubuntu1_amd64.deb) ...
Selecting previously unselected package libidn11-dev.
Unpacking libidn11-dev (from .../libidn11-dev_1.23-2_amd64.deb) ...
Selecting previously unselected package libkrb5-dev.
Unpacking libkrb5-dev (from .../libkrb5-dev_1.10+dfsg~beta1-2ubuntu0.5_amd64.deb) ...
Selecting previously unselected package libldap2-dev.
Unpacking libldap2-dev (from .../libldap2-dev_2.4.28-1.1ubuntu4.4_amd64.deb) ...
Selecting previously unselected package libgpg-error-dev.
Unpacking libgpg-error-dev (from .../libgpg-error-dev_1.10-2ubuntu1_amd64.deb) ...
Selecting previously unselected package libgcrypt11-dev.
Unpacking libgcrypt11-dev (from .../libgcrypt11-dev_1.5.0-3ubuntu0.3_amd64.deb) ...
Selecting previously unselected package libtasn1-3-dev.
Unpacking libtasn1-3-dev (from .../libtasn1-3-dev_2.10-1ubuntu1.2_amd64.deb) ...
Selecting previously unselected package libp11-kit-dev.
Unpacking libp11-kit-dev (from .../libp11-kit-dev_0.12-2ubuntu1_amd64.deb) ...
Selecting previously unselected package libgnutls-dev.
Unpacking libgnutls-dev (from .../libgnutls-dev_2.12.14-5ubuntu3.8_amd64.deb) ...
Selecting previously unselected package librtmp-dev.
Unpacking librtmp-dev (from .../librtmp-dev_2.4~20110711.gitc28f1bab-1_amd64.deb) ...
Selecting previously unselected package libcurl4-openssl-dev.
Unpacking libcurl4-openssl-dev (from .../libcurl4-openssl-dev_7.22.0-3ubuntu4.10_amd64.deb) ...
Selecting previously unselected package ssl-cert.
Unpacking ssl-cert (from .../ssl-cert_1.0.28ubuntu0.1_all.deb) ...
Processing triggers for man-db ...
Processing triggers for ureadahead ...
Processing triggers for ufw ...
Processing triggers for install-info ...
Setting up libgcrypt11 (1.5.0-3ubuntu0.3) ...
Setting up libtasn1-3 (2.10-1ubuntu1.2) ...
Setting up libgnutls26 (2.12.14-5ubuntu3.8) ...
Setting up libkrb5support0 (1.10+dfsg~beta1-2ubuntu0.5) ...
Setting up libk5crypto3 (1.10+dfsg~beta1-2ubuntu0.5) ...
Setting up libkrb5-3 (1.10+dfsg~beta1-2ubuntu0.5) ...
Setting up libgssapi-krb5-2 (1.10+dfsg~beta1-2ubuntu0.5) ...
Setting up libgssrpc4 (1.10+dfsg~beta1-2ubuntu0.5) ...
Setting up libkadm5clnt-mit8 (1.10+dfsg~beta1-2ubuntu0.5) ...
Setting up libkdb5-6 (1.10+dfsg~beta1-2ubuntu0.5) ...
Setting up libkadm5srv-mit8 (1.10+dfsg~beta1-2ubuntu0.5) ...
Setting up libldap-2.4-2 (2.4.28-1.1ubuntu4.4) ...
Setting up libgnutls-openssl27 (2.12.14-5ubuntu3.8) ...
Setting up libgnutlsxx27 (2.12.14-5ubuntu3.8) ...
Setting up libapr1 (1.4.6-1) ...
Setting up libaprutil1 (1.3.12+dfsg-3) ...
Setting up libaprutil1-dbd-sqlite3 (1.3.12+dfsg-3) ...
Setting up libaprutil1-ldap (1.3.12+dfsg-3) ...
Setting up apache2.2-bin (2.2.22-1ubuntu1.7) ...
Setting up apache2-utils (2.2.22-1ubuntu1.7) ...
Setting up apache2.2-common (2.2.22-1ubuntu1.7) ...
Enabling site default.
Enabling module alias.
Enabling module autoindex.
Enabling module dir.
Enabling module env.
Enabling module mime.
Enabling module negotiation.
Enabling module setenvif.
Enabling module status.
Enabling module auth_basic.
Enabling module deflate.
Enabling module authz_default.
Enabling module authz_user.
Enabling module authz_groupfile.
Enabling module authn_file.
Enabling module authz_host.
Enabling module reqtimeout.
Setting up apache2-mpm-worker (2.2.22-1ubuntu1.7) ...
 * Starting web server apache2       [219G [213G[ OK ]
Setting up apache2 (2.2.22-1ubuntu1.7) ...
Setting up comerr-dev (2.1-1.42-1ubuntu2) ...
Setting up krb5-multidev (1.10+dfsg~beta1-2ubuntu0.5) ...
Setting up pkg-config (0.26-1ubuntu1) ...
Setting up libidn11-dev (1.23-2) ...
Setting up libkrb5-dev (1.10+dfsg~beta1-2ubuntu0.5) ...
Setting up libldap2-dev (2.4.28-1.1ubuntu4.4) ...
Setting up libgpg-error-dev (1.10-2ubuntu1) ...
Setting up libgcrypt11-dev (1.5.0-3ubuntu0.3) ...
Setting up libtasn1-3-dev (2.10-1ubuntu1.2) ...
Setting up libp11-kit-dev (0.12-2ubuntu1) ...
Setting up libgnutls-dev (2.12.14-5ubuntu3.8) ...
Setting up librtmp-dev (2.4~20110711.gitc28f1bab-1) ...
Setting up libcurl4-openssl-dev (7.22.0-3ubuntu4.10) ...
Setting up ssl-cert (1.0.28ubuntu0.1) ...
Processing triggers for libc-bin ...
ldconfig deferred processing now taking place
#! /bin/sh

### BEGIN INIT INFO
# Provides:          logstash
# Required-Start:    $remote_fs $syslog
# Required-Stop:     $remote_fs $syslog
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Start daemon at boot time
# Description:       Enable service provided by daemon.
### END INIT INFO

. /lib/lsb/init-functions

name="logstash"
logstash_bin="/usr/bin/java -- -jar /opt/logstash/logstash.jar"
logstash_conf="/etc/logstash/apache_logstash.conf"
logstash_log="/var/log/logstash.log"
pid_file="/var/run/$name.pid"
patterns_path="/etc/logstash/patterns"

start () {
        command="${logstash_bin} agent -f $logstash_conf --log ${logstash_log}"

        log_daemon_msg "Starting $name" "$name"
        if start-stop-daemon --start --quiet --oknodo --pidfile "$pid_file" -b -m --exec $command; then
                log_end_msg 0
        else
                log_end_msg 1
        fi
}

stop () {
        log_daemon_msg "Stopping $name" "$name"
        start-stop-daemon --stop --quiet --oknodo --pidfile "$pid_file"
}

status () {
        status_of_proc -p "$pid_file" "$name"
}

case $1 in
        start)
                if status; then exit 0; fi
                start
                ;;
        stop)
                stop
                ;;
        reload)
                stop
                start
                ;;
        restart)
                stop
                start
                ;;
        status)
                status && exit 0 || exit $?
                ;;
        *)
                echo "Usage: $0 {start|stop|restart|reload|status}"
                exit 1
                ;;
esac

exit 0
 Adding system startup for /etc/init.d/logstash ...
   /etc/rc0.d/K20logstash -> ../init.d/logstash
   /etc/rc1.d/K20logstash -> ../init.d/logstash
   /etc/rc6.d/K20logstash -> ../init.d/logstash
   /etc/rc2.d/S20logstash -> ../init.d/logstash
   /etc/rc3.d/S20logstash -> ../init.d/logstash
   /etc/rc4.d/S20logstash -> ../init.d/logstash
   /etc/rc5.d/S20logstash -> ../init.d/logstash
Enter your Graylog2 server name or IP: 
input {
  file {
    path => "/var/log/apache2/*access.log"
    type => "apache"
    sincedb_path => "/var/log/.sincedb"
  }
}

filter {
  if [type] == "apache" {
    grok {
      pattern => "%{COMBINEDAPACHELOG}"
    }
  }
}

output {
  gelf { host => "192.168.33.22" }
}
Cloning into 'logstash'...
 * Stopping logstash logstash
 * Starting logstash logstash
   ...done.
Installation has completed!!
[1m[33mEveryThingShouldBeVirtual.com(B[m
[1m[33m@mrlesmithjr(B[m
[1m[33mEnjoy!!!(B[m
